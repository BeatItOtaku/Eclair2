using UnityEngine;
using System.Collections;
using UnityEngine.UI;

public class TimeCounter : MonoBehaviour {

<<<<<<< .merge_file_6WlXJ2
	public float time = 120;
=======
	public float defaultTime = 120;

	[System.NonSerialized]
	public float time;
>>>>>>> .merge_file_ut182g
	private float remainingTime;

	public GameManager gm;

<<<<<<< .merge_file_6WlXJ2
=======
	private bool isCounting = false;

	//GameManagerで使ってるよ
	public System.Action OnTimeUp;

>>>>>>> .merge_file_ut182g
	// Use this for initialization
	void Start () {
	
	}
	
	// Update is called once per frame
	void Update () {
<<<<<<< .merge_file_6WlXJ2
=======
		if (!isCounting)
			return;
>>>>>>> .merge_file_ut182g

		if (gm.monumentCount != gm.allMonument) {
			if (time >= 0) {
				time -= Time.deltaTime;
				time = Mathf.Max (time, 0.0f);
				GetComponent<UnityEngine.UI.Text>().text = ((int)time).ToString();
			} else {
				gm.totalScore = gm.score;
<<<<<<< .merge_file_6WlXJ2
=======
				OnTimeUp ();
>>>>>>> .merge_file_ut182g
				//ゲーム終了
			}
		}

		if (gm.monumentCount == gm.allMonument) {			
			remainingTime = time;
			gm.totalScore = gm.score + remainingTime * 10;
			//ゲーム終了
		}
<<<<<<< .merge_file_6WlXJ2
	
=======
	}

	public void StartCount(){
		isCounting = true;
		time = defaultTime;
	}

	public void StopCount(){
		isCounting = false;
		time = 0;
>>>>>>> .merge_file_ut182g
	}
}
